---
applyTo: "**"
---

# Hotel Booking Mobile App - AI Agent Instructions

## Project Overview

Build a mobile application using Expo (React Native) for customers to search and book hotels. This is a **frontend-only application** that connects to existing backend APIs.

## Tech Stack

- **Framework**: Expo (React Native)
- **Language**: TypeScript
- **State Management**: React Context API or Zustand
- **Navigation**: React Navigation (Stack, Tab, and Modal navigators)
- **API Communication**: Axios or Fetch API
- **Form Handling**: React Hook Form
- **UI Components**: React Native Paper or NativeBase
- **Date Handling**: date-fns or day.js
- **Image Handling**: Expo Image
- **Storage**: AsyncStorage for local data persistence

## Project Structure

```
src/
├── components/          # Reusable UI components
│   ├── common/         # Generic components (Button, Input, Card, etc.)
│   ├── hotel/          # Hotel-specific components
│   └── booking/        # Booking-specific components
├── screens/            # Screen components
│   ├── auth/          # Login, Register, Profile
│   ├── search/        # Search and filters
│   ├── hotel/         # Hotel details, gallery
│   └── booking/       # Booking flow, confirmation
├── navigation/         # Navigation configuration
├── services/          # API service layer
│   ├── api.ts         # Axios instance and interceptors
│   └── endpoints/     # API endpoint functions
├── context/           # React Context for state management
├── hooks/             # Custom React hooks
├── utils/             # Helper functions
├── types/             # TypeScript type definitions
├── constants/         # App constants (colors, sizes, etc.)
└── assets/            # Images, fonts, icons
```

## Core Features to Implement

### 1. Authentication

- Login screen with email/password
- Registration screen with validation
- Forgot password flow
- Biometric authentication (optional)
- Store auth token in AsyncStorage
- Auto-login on app launch

### 2. Hotel Search

- Search bar with location autocomplete
- Date range picker (check-in/check-out)
- Guest count selector (adults, children, rooms)
- Filter options:
  - Price range
  - Star rating
  - Amenities (WiFi, parking, pool, etc.)
  - Distance from location
  - Guest rating
- Sort options (price, rating, distance)
- Search results list with infinite scroll
- Hotel cards showing: image, name, rating, price, location

### 3. Hotel Details

- Image gallery with swipeable carousel
- Hotel name, star rating, and location
- Description and amenities list
- Room types with images and details
- Price breakdown
- Guest reviews section
- Map view showing hotel location
- "Book Now" CTA

### 4. Booking Flow

- Room selection with availability
- Guest information form
- Special requests text area
- Payment method selection (credit card, digital wallets)
- Booking summary with price breakdown
- Terms and conditions checkbox
- Confirmation screen with booking ID
- Email confirmation trigger

### 5. User Profile

- View and edit profile information
- Booking history with status
- Saved hotels/favorites
- Payment methods management
- Notification preferences
- Logout functionality

### 6. Additional Features

- Push notifications for booking updates
- Deep linking for shared hotels
- Offline mode with cached data
- Pull-to-refresh on lists
- Loading skeletons
- Error handling with retry options
- Empty states for no results

## API Integration Guidelines

### API Configuration

```typescript
// Expected API base URL format
const API_BASE_URL = process.env.EXPO_PUBLIC_API_URL;

// Expected authentication header format
headers: {
  'Authorization': `Bearer ${token}`,
  'Content-Type': 'application/json'
}
```

### Expected API Endpoints (adjust as needed)

- `POST /auth/login` - User login
- `POST /auth/register` - User registration
- `GET /hotels/search` - Search hotels with filters
- `GET /hotels/:id` - Get hotel details
- `GET /hotels/:id/rooms` - Get available rooms
- `POST /bookings` - Create new booking
- `GET /bookings` - Get user bookings
- `GET /bookings/:id` - Get booking details
- `PUT /bookings/:id/cancel` - Cancel booking
- `GET /user/profile` - Get user profile
- `PUT /user/profile` - Update user profile
- `GET /locations/autocomplete` - Location search

### API Response Handling

- Implement proper error handling for network errors
- Handle HTTP status codes (401 for auth, 404, 500, etc.)
- Show user-friendly error messages
- Implement retry logic for failed requests
- Add loading states for all async operations

## UI/UX Guidelines

### Design Principles

- Follow iOS and Android platform guidelines
- Implement smooth animations and transitions
- Use native components when possible for better performance
- Ensure accessibility (screen reader support, proper labels)
- Support both light and dark themes

### Component Patterns

- Use functional components with hooks
- Implement proper prop types with TypeScript interfaces
- Create reusable components for common patterns
- Use memo for performance optimization where needed
- Implement proper keyboard handling for forms

### Navigation Structure

```
Tab Navigator (Main):
├── Home (Stack)
│   ├── Search Screen
│   ├── Search Results
│   └── Hotel Details
├── Bookings (Stack)
│   ├── Booking List
│   └── Booking Details
└── Profile (Stack)
    ├── Profile Screen
    └── Edit Profile

Modal Screens:
├── Filters
├── Date Picker
├── Guest Selector
└── Image Gallery
```

## Code Quality Standards

### TypeScript

- Use strict mode
- Define interfaces for all API responses
- Avoid using `any` type
- Create type definitions for props and state

### Best Practices

- Follow ESLint and Prettier configurations
- Write descriptive variable and function names
- Add JSDoc comments for complex functions
- Keep components small and focused (single responsibility)
- Extract business logic into custom hooks
- Use constants for magic numbers and strings

### Performance

- Implement FlatList for long lists (not ScrollView)
- Use React.memo for expensive components
- Optimize images (compress, use appropriate sizes)
- Lazy load screens and heavy components
- Debounce search inputs
- Cache API responses when appropriate

### Error Handling

```typescript
// Pattern for API error handling
try {
  const response = await api.getHotels(params);
  setHotels(response.data);
} catch (error) {
  if (error.response?.status === 401) {
    // Handle authentication error
    handleLogout();
  } else if (error.response?.status === 404) {
    // Handle not found
    showMessage("No hotels found");
  } else {
    // Handle generic error
    showMessage("Something went wrong. Please try again.");
  }
  console.error("API Error:", error);
}
```

## Environment Configuration

Create `.env` file with:

```
EXPO_PUBLIC_API_URL=https://api.yourbackend.com
EXPO_PUBLIC_GOOGLE_MAPS_KEY=your_key_here
```

## Testing Considerations

- Write unit tests for utility functions
- Test custom hooks with React Testing Library
- Test API service functions with mocked responses
- Implement E2E tests for critical flows (search, booking)

## Security Guidelines

- Never commit API keys or secrets
- Use HTTPS for all API calls
- Validate all user inputs
- Sanitize data before displaying
- Use secure storage for sensitive data
- Implement proper token refresh logic
- Handle token expiration gracefully

## Accessibility Requirements

- Add accessibility labels to all interactive elements
- Ensure proper contrast ratios for text
- Support dynamic font sizes
- Test with screen readers (TalkBack, VoiceOver)
- Ensure keyboard navigation works properly

## When Generating Code:

1. Always include TypeScript type definitions
2. Add proper error handling and loading states
3. Include comments for complex logic
4. Follow the project structure outlined above
5. Use async/await for asynchronous operations
6. Implement proper prop validation
7. Add appropriate keys for list items
8. Consider edge cases and empty states
9. Optimize for both iOS and Android
10. Make components reusable and maintainable

## Example Component Pattern

```typescript
interface HotelCardProps {
  hotel: Hotel;
  onPress: (hotelId: string) => void;
}

export const HotelCard: React.FC<HotelCardProps> = ({ hotel, onPress }) => {
  const handlePress = () => onPress(hotel.id);

  return (
    <TouchableOpacity
      onPress={handlePress}
      accessibilityLabel={`View ${hotel.name}`}
      accessibilityRole="button"
    >
      {/* Component content */}
    </TouchableOpacity>
  );
};
```

## Priority Implementation Order

1. Project setup and navigation structure
2. API service layer and authentication
3. Search functionality with filters
4. Hotel details screen
5. Booking flow
6. User profile and booking history
7. Polish and optimization
8. Testing and bug fixes
